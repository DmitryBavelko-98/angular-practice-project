<div class="server-table">

    <div class="page-panel">
      <app-search-field (valueChange)="findUsers($event)"></app-search-field>
    </div>

    <div class="spinner-container" *ngIf="!users.length">
      <mat-spinner></mat-spinner>
    </div>

    <div *ngIf="users && !users.length">
      <h3>No users found!</h3>
    </div>

    <table mat-table [dataSource]="users" matSort>
  
      <ng-container matColumnDef="lastName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Full name </th>
        <td mat-cell *matCellDef="let user"> {{ user | fullName }} </td>
      </ng-container>
  
      <ng-container matColumnDef="email">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Email </th>
        <td mat-cell *matCellDef="let user">{{user.email}} </td>
      </ng-container>
  
      <ng-container matColumnDef="age">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Age </th>
        <td mat-cell *matCellDef="let user"> {{user.age}} </td>
      </ng-container>
  
      <ng-container matColumnDef="addresses">
        <th mat-header-cell *matHeaderCellDef> Addresses </th>
        <td mat-cell *matCellDef="let user">
          <app-address [index]="0" [address]="user.addresses[0]"></app-address>
        </td>
      </ng-container>

      <ng-container matColumnDef="department">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> Department </th>
        <td mat-cell *matCellDef="let user"> {{user.department}} </td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  
    <mat-paginator 
        [pageSizeOptions]="paginatorOptions" 
        [length]="paginatorLength" 
        [pageSize]="paginatorPageSize" 
        showFirstLastButtons>
    </mat-paginator>
</div>

